# 车道线标注工具

基于Web的车道线检测和可行驶区域标注工具，专为计算机视觉数据集设计。具有智能填色算法和高效的标注工作流程。

## 功能特性

- **智能填色算法**：基于已有标注边界的高级填色算法
- **跨平台支持**：基于Web界面，兼容桌面和移动设备
- **iPad优化**：增强支持iPad和Apple Pencil输入
- **多种标注工具**：画笔、橡皮擦、多边形和填色工具
- **增量编辑**：自动加载已有标注，支持继续编辑
- **实时预览**：标注结果的实时叠加显示
- **撤销重做**：多级操作历史记录
- **进度跟踪**：批量标注任务的可视化进度指示

## 快速开始

### 安装

```bash
git clone [仓库地址]
cd lane-annotation-tool
pip install -r requirements.txt
```

### 使用方法

1. 启动应用：
   ```bash
   python start.py
   ```

2. 将图片放入 `data/images/` 目录

3. 打开Web界面（自动在浏览器中打开）

4. 使用可用工具开始标注

### 访问地址

- 本地访问：http://localhost:5000
- 网络访问：http://[你的IP]:5000

## 目录结构

```
lane-annotation-tool/
├── app.py                   # Flask应用主文件
├── start.py                 # 应用启动器
├── requirements.txt         # Python依赖包
├── data/
│   ├── images/             # 输入图片
│   └── masks/              # 输出标注掩码
└── templates/
    └── annotation.html     # Web界面
```

## 标注工作流程

### 基本工作流程

1. **边界定义**：使用画笔工具勾勒区域轮廓
2. **区域填充**：对封闭区域应用填色工具
3. **精细调整**：使用橡皮擦和多边形工具进行精确修正
4. **质量检查**：切换预览模式验证标注效果
5. **保存**：将标注导出为PNG掩码文件

### 快捷键

| 按键 | 功能 |
|-----|----------|
| B | 画笔模式 |
| E | 橡皮擦模式 |
| F | 填色模式 |
| P | 多边形模式 |
| Ctrl+S | 保存标注 |
| Ctrl+Z | 撤销 |

### 填色算法说明

填色功能基于已有标注边界而非图像像素值进行操作：

- **边界检测**：使用已标注区域作为边界
- **边缘处理**：图像边缘被视为封闭边界
- **高效性**：针对大面积标注任务进行优化
- **精确性**：通过基于边界的填充保持标注质量

## 技术规格

### 输入输出格式

- **输入**：JPEG、PNG图像文件
- **输出**：PNG掩码文件（灰度：0=背景，255=目标）

### 系统要求

- Python 3.7+
- 现代Web浏览器
- 最低4GB内存
- 多设备访问需要网络连接

### 技术栈

- **后端**：Flask、OpenCV、Pillow
- **前端**：HTML5 Canvas、JavaScript
- **图像处理**：NumPy、OpenCV

## 应用场景

- 车道线检测数据集制作
- 可行驶区域分割
- 道路语义标注
- 自动驾驶研究
- 计算机视觉教学

## 配置说明

应用使用以下默认配置：

- **端口**：5000
- **输入目录**：`data/images/`
- **输出目录**：`data/masks/`
- **主机**：0.0.0.0（支持网络访问）

## 贡献

1. Fork仓库
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建Pull Request

## 许可证

MIT许可证 - 详见[LICENSE](LICENSE)文件。

## 支持

如需报告bug或请求新功能，请使用GitHub问题跟踪器。
